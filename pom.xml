#!/bin/sh

# initial-git-install
#
# Created by Matthew Rankin on 2009-09-18.
# Copyright (c) 2009 Cumulusware, LLC. All rights reserved.
#
# Chicken-egg script for installing git. 
# Once git is installed it only makes sense to use git to update git.
#

if [ -z "$1" ]; then
    echo "Please provide the git filename that you want to install."
    echo "Last known version was gdbm-1.8.3"
    exit
fi

INSTALLFILE=$1

# Change into ~/src and make if needed
if [ ! -d ~/src ]; then
    mkdir ~/src
fi

cd ~/src

# Download, untar, configure, make, install
curl -O http://mirror.anl.gov/pub/gnu/gdbm/$INSTALLFILE.tar.gz
tar xzvf $INSTALLFILE.tar.gz
cd $INSTALLFILE
# Need to modify Makefile.in
perl -pi -e 's/BINOWN = bin/BINOWN = root/' Makefile.in
perl -pi -e 's/BINGRP = bin/BINGRP = wheel/' Makefile.in
./configure
make
sudo make install
